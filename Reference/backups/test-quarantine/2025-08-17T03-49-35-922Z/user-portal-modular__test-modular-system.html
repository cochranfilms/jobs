<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Portal Modular System - Test</title>
    
    <!-- Fonts -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" as="style">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    
    <style>
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .test-header {
            background: linear-gradient(135deg, #ffb200 0%, #ff8c00 100%);
            color: white;
            padding: 2rem;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .test-section {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }
        
        .test-card {
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .test-card:hover {
            border-color: #ffb200;
            transform: translateY(-2px);
        }
        
        .test-card.success {
            border-color: #28a745;
            background: #f8fff9;
        }
        
        .test-card.error {
            border-color: #dc3545;
            background: #fff8f8;
        }
        
        .test-status {
            font-size: 2rem;
            margin-bottom: 1rem;
        }
        
        .test-status.success {
            color: #28a745;
        }
        
        .test-status.error {
            color: #dc3545;
        }
        
        .test-status.warning {
            color: #ffc107;
        }
        
        .test-status.info {
            color: #17a2b8;
        }
        
        .test-button {
            margin: 0.5rem;
        }
        
        .test-output {
            background: #f8f9fa;
            border: 1px solid #e1e5e9;
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
            font-family: monospace;
            font-size: 0.9rem;
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>User Portal Modular System - Test Suite</h1>
            <p>Testing the modular architecture and core functionality</p>
        </div>

        <!-- System Status Test -->
        <div class="test-section">
            <h2>System Status</h2>
            <div class="test-grid">
                <div class="test-card" id="systemStatus">
                    <div class="test-status info">
                        <i class="fas fa-cog fa-spin"></i>
                    </div>
                    <h3>System Status</h3>
                    <p>Checking system components...</p>
                </div>
                
                <div class="test-card" id="authStatus">
                    <div class="test-status info">
                        <i class="fas fa-user-shield"></i>
                    </div>
                    <h3>Authentication</h3>
                    <p>Checking auth system...</p>
                </div>
                
                <div class="test-card" id="moduleStatus">
                    <div class="test-status info">
                        <i class="fas fa-puzzle-piece"></i>
                    </div>
                    <h3>Modules</h3>
                    <p>Checking modules...</p>
                </div>
            </div>
        </div>

        <!-- Module Testing -->
        <div class="test-section">
            <h2>Module Testing</h2>
            <div class="test-grid">
                <div class="test-card">
                    <div class="test-status info">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <h3>Error Handler</h3>
                    <p>Test error handling system</p>
                    <button class="btn btn-warning test-button" onclick="testErrorHandler()">
                        Test Error
                    </button>
                </div>
                
                <div class="test-card">
                    <div class="test-status info">
                        <i class="fas fa-bell"></i>
                    </div>
                    <h3>Notifications</h3>
                    <p>Test notification system</p>
                    <button class="btn btn-info test-button" onclick="testNotifications()">
                        Test Notifications
                    </button>
                </div>
                
                <div class="test-card">
                    <div class="test-status info">
                        <i class="fas fa-spinner"></i>
                    </div>
                    <h3>Loading States</h3>
                    <p>Test loading management</p>
                    <button class="btn btn-primary test-button" onclick="testLoadingStates()">
                        Test Loading
                    </button>
                </div>
            </div>
        </div>

        <!-- UI Component Testing -->
        <div class="test-section">
            <h2>UI Component Testing</h2>
            <div class="test-grid">
                <div class="test-card">
                    <h3>Buttons</h3>
                    <div class="test-button">
                        <button class="btn btn-primary">Primary</button>
                        <button class="btn btn-secondary">Secondary</button>
                        <button class="btn btn-success">Success</button>
                        <button class="btn btn-danger">Danger</button>
                    </div>
                </div>
                
                <div class="test-card">
                    <h3>Forms</h3>
                    <div class="form-group">
                        <label for="testInput">Test Input</label>
                        <input type="text" id="testInput" placeholder="Enter text...">
                    </div>
                </div>
                
                <div class="test-card">
                    <h3>Cards</h3>
                    <div class="card">
                        <div class="card-header">
                            <h3>Test Card</h3>
                        </div>
                        <div class="card-content">
                            <p>This is a test card component.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Test Output -->
        <div class="test-section">
            <h2>Test Output</h2>
            <div class="test-output" id="testOutput">
                <p>Test output will appear here...</p>
            </div>
            <button class="btn btn-secondary" onclick="clearTestOutput()">Clear Output</button>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container"></div>

    <script>
        // ==================== TEST FUNCTIONS ====================
        
        let testOutput = '';
        
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            testOutput += `[${timestamp}] ${type.toUpperCase()}: ${message}\n`;
            document.getElementById('testOutput').textContent = testOutput;
        }
        
        function clearTestOutput() {
            testOutput = '';
            document.getElementById('testOutput').textContent = 'Test output cleared...';
        }
        
        // ==================== SYSTEM STATUS TEST ====================
        
        async function checkSystemStatus() {
            try {
                log('Checking system status...', 'info');
                
                // Check if CSS is loaded
                const styles = getComputedStyle(document.body);
                if (styles.fontFamily.includes('Inter')) {
                    updateStatus('systemStatus', 'success', 'CSS Loaded', 'System styles are working');
                    log('‚úÖ CSS loaded successfully', 'success');
                } else {
                    updateStatus('systemStatus', 'error', 'CSS Error', 'System styles failed to load');
                    log('‚ùå CSS failed to load', 'error');
                }
                
                // Check if Font Awesome is loaded
                if (document.querySelector('.fas')) {
                    log('‚úÖ Font Awesome loaded successfully', 'success');
                } else {
                    log('‚ùå Font Awesome failed to load', 'error');
                }
                
                // Check if modules can be imported
                try {
                    // Test module import (this will fail in regular HTML, but that's expected)
                    log('‚ö†Ô∏è Module import test skipped (expected in HTML context)', 'warning');
                    updateStatus('moduleStatus', 'warning', 'Modules Ready', 'Modules will work in modular context');
                } catch (error) {
                    log('‚ùå Module import failed: ' + error.message, 'error');
                    updateStatus('moduleStatus', 'error', 'Module Error', 'Failed to import modules');
                }
                
                // Check authentication system
                updateStatus('authStatus', 'info', 'Auth Ready', 'Authentication system ready for testing');
                log('‚úÖ System status check completed', 'success');
                
            } catch (error) {
                log('‚ùå System status check failed: ' + error.message, 'error');
            }
        }
        
        function updateStatus(elementId, status, title, message) {
            const element = document.getElementById(elementId);
            if (element) {
                const statusElement = element.querySelector('.test-status');
                const titleElement = element.querySelector('h3');
                const messageElement = element.querySelector('p');
                
                // Update status icon
                statusElement.className = `test-status ${status}`;
                statusElement.innerHTML = getStatusIcon(status);
                
                // Update content
                titleElement.textContent = title;
                messageElement.textContent = message;
                
                // Update card styling
                element.className = `test-card ${status}`;
            }
        }
        
        function getStatusIcon(status) {
            const iconMap = {
                success: '<i class="fas fa-check-circle"></i>',
                error: '<i class="fas fa-times-circle"></i>',
                warning: '<i class="fas fa-exclamation-triangle"></i>',
                info: '<i class="fas fa-info-circle"></i>'
            };
            return iconMap[status] || iconMap.info;
        }
        
        // ==================== ERROR HANDLER TEST ====================
        
        function testErrorHandler() {
            try {
                log('Testing error handler...', 'info');
                
                // Simulate different types of errors
                const errors = [
                    new Error('Test error message'),
                    new TypeError('Type error test'),
                    'String error test',
                    { custom: 'Custom error object' }
                ];
                
                errors.forEach((error, index) => {
                    log(`Generated error ${index + 1}: ${error.message || error}`, 'info');
                });
                
                // Show test notification
                showTestNotification('Error Handler Test', 'Multiple test errors generated', 'error');
                
                log('‚úÖ Error handler test completed', 'success');
                
            } catch (error) {
                log('‚ùå Error handler test failed: ' + error.message, 'error');
            }
        }
        
        // ==================== NOTIFICATION TEST ====================
        
        function testNotifications() {
            try {
                log('Testing notification system...', 'info');
                
                const notifications = [
                    { type: 'success', message: 'Success notification test' },
                    { type: 'error', message: 'Error notification test' },
                    { type: 'warning', message: 'Warning notification test' },
                    { type: 'info', message: 'Info notification test' }
                ];
                
                notifications.forEach((notification, index) => {
                    setTimeout(() => {
                        showTestNotification(
                            notification.type.charAt(0).toUpperCase() + notification.type.slice(1),
                            notification.message,
                            notification.type
                        );
                        log(`‚úÖ Notification ${index + 1} shown: ${notification.type}`, 'success');
                    }, index * 1000);
                });
                
                log('‚úÖ Notification test completed', 'success');
                
            } catch (error) {
                log('‚ùå Notification test failed: ' + error.message, 'error');
            }
        }
        
        function showTestNotification(title, message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type} slide-in`;
            notification.innerHTML = `
                <div class="notification-icon">
                    <i class="fas fa-${getNotificationIcon(type)}"></i>
                </div>
                <div class="notification-content">
                    <div class="notification-title">${title}</div>
                    <div class="notification-message">${message}</div>
                </div>
                <button class="notification-close" onclick="this.parentElement.remove()">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            const container = document.getElementById('toast-container');
            if (container) {
                container.appendChild(notification);
                
                // Auto-remove after 5 seconds
                setTimeout(() => {
                    if (notification.parentElement) {
                        notification.remove();
                    }
                }, 5000);
            }
        }
        
        function getNotificationIcon(type) {
            const iconMap = {
                success: 'check-circle',
                error: 'exclamation-circle',
                warning: 'exclamation-triangle',
                info: 'info-circle'
            };
            return iconMap[type] || 'info-circle';
        }
        
        // ==================== LOADING STATES TEST ====================
        
        function testLoadingStates() {
            try {
                log('Testing loading states...', 'info');
                
                // Test button loading
                const testButton = document.querySelector('.btn-primary');
                if (testButton) {
                    testButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Loading...';
                    testButton.disabled = true;
                    
                    setTimeout(() => {
                        testButton.innerHTML = 'Test Loading';
                        testButton.disabled = false;
                        log('‚úÖ Button loading state test completed', 'success');
                    }, 2000);
                }
                
                // Test component loading
                const testCard = document.querySelector('.test-card');
                if (testCard) {
                    testCard.style.position = 'relative';
                    testCard.innerHTML += `
                        <div class="component-loading" style="
                            position: absolute;
                            top: 50%;
                            left: 50%;
                            transform: translate(-50%, -50%);
                            background: rgba(255, 255, 255, 0.9);
                            padding: 1rem;
                            border-radius: 8px;
                            z-index: 10;
                        ">
                            <div class="component-spinner" style="
                                width: 20px;
                                height: 20px;
                                border: 2px solid #f3f3f3;
                                border-top: 2px solid #ffb200;
                                border-radius: 50%;
                                animation: spin 1s linear infinite;
                            "></div>
                            <span>Loading...</span>
                        </div>
                    `;
                    
                    setTimeout(() => {
                        const loadingElement = testCard.querySelector('.component-loading');
                        if (loadingElement) {
                            loadingElement.remove();
                        }
                        log('‚úÖ Component loading state test completed', 'success');
                    }, 2000);
                }
                
                log('‚úÖ Loading states test completed', 'success');
                
            } catch (error) {
                log('‚ùå Loading states test failed: ' + error.message, 'error');
            }
        }
        
        // ==================== INITIALIZATION ====================
        
        document.addEventListener('DOMContentLoaded', () => {
            log('üöÄ Test suite initialized', 'info');
            
            // Run system status check
            setTimeout(checkSystemStatus, 1000);
            
            log('‚úÖ Test suite ready for testing', 'success');
        });
        
        // ==================== UTILITY FUNCTIONS ====================
        
        function getRandomColor() {
            const colors = ['#ffb200', '#28a745', '#dc3545', '#17a2b8', '#6f42c1'];
            return colors[Math.floor(Math.random() * colors.length)];
        }
        
        function simulateAsyncOperation(delay = 1000) {
            return new Promise(resolve => setTimeout(resolve, delay));
        }
    </script>
</body>
</html>
